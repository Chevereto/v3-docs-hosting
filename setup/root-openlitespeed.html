<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Root install (OpenLiteSpeed) | V3 docs</title>
    <meta name="generator" content="VuePress 1.5.2">
    <link rel="icon" href="/logo.svg">
    <link rel="manifest" href="/manifest.json">
    <link rel="apple-touch-icon" href="/logo.svg">
    <link rel="mask-icon" href="/logo.svg" color="#3eaf7c">
    <meta name="description" content="Documentation for Chevereto V3">
    <meta name="theme-color" content="#23a8e0">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileImage" content="/logo.svg">
    <meta name="msapplication-TileColor" content="#000000">
    <link rel="preload" href="/assets/css/0.styles.4740d439.css" as="style"><link rel="preload" href="/assets/js/app.45a3a24b.js" as="script"><link rel="preload" href="/assets/js/3.4515a572.js" as="script"><link rel="preload" href="/assets/js/55.78de9666.js" as="script"><link rel="preload" href="/assets/js/4.f46e38da.js" as="script"><link rel="prefetch" href="/assets/js/10.206b3dd7.js"><link rel="prefetch" href="/assets/js/11.39014c7e.js"><link rel="prefetch" href="/assets/js/12.df57db84.js"><link rel="prefetch" href="/assets/js/13.d14ca303.js"><link rel="prefetch" href="/assets/js/14.305cc2e6.js"><link rel="prefetch" href="/assets/js/15.74b93294.js"><link rel="prefetch" href="/assets/js/16.ddddbaf0.js"><link rel="prefetch" href="/assets/js/17.c2409140.js"><link rel="prefetch" href="/assets/js/18.cee25cf3.js"><link rel="prefetch" href="/assets/js/19.18907367.js"><link rel="prefetch" href="/assets/js/20.8bf6f9e9.js"><link rel="prefetch" href="/assets/js/21.08262f33.js"><link rel="prefetch" href="/assets/js/22.77df7383.js"><link rel="prefetch" href="/assets/js/23.0b93518f.js"><link rel="prefetch" href="/assets/js/24.4d84a2d1.js"><link rel="prefetch" href="/assets/js/25.5feffc9c.js"><link rel="prefetch" href="/assets/js/26.7fa77ad7.js"><link rel="prefetch" href="/assets/js/27.06f87f55.js"><link rel="prefetch" href="/assets/js/28.b842efe2.js"><link rel="prefetch" href="/assets/js/29.5f556e83.js"><link rel="prefetch" href="/assets/js/30.721a4c73.js"><link rel="prefetch" href="/assets/js/31.bee5b88f.js"><link rel="prefetch" href="/assets/js/32.00610eaa.js"><link rel="prefetch" href="/assets/js/33.b960edbd.js"><link rel="prefetch" href="/assets/js/34.1fc3fa95.js"><link rel="prefetch" href="/assets/js/35.ecbec9b4.js"><link rel="prefetch" href="/assets/js/36.e552267b.js"><link rel="prefetch" href="/assets/js/37.959fff77.js"><link rel="prefetch" href="/assets/js/38.bbdd131f.js"><link rel="prefetch" href="/assets/js/39.2469ef3d.js"><link rel="prefetch" href="/assets/js/40.b27ee742.js"><link rel="prefetch" href="/assets/js/41.d7cf1423.js"><link rel="prefetch" href="/assets/js/42.ade7ab10.js"><link rel="prefetch" href="/assets/js/43.77573363.js"><link rel="prefetch" href="/assets/js/44.f637161b.js"><link rel="prefetch" href="/assets/js/45.2d500972.js"><link rel="prefetch" href="/assets/js/46.06d9623c.js"><link rel="prefetch" href="/assets/js/47.81cdf2b1.js"><link rel="prefetch" href="/assets/js/48.e067f757.js"><link rel="prefetch" href="/assets/js/49.b9e45969.js"><link rel="prefetch" href="/assets/js/5.ed8adbe0.js"><link rel="prefetch" href="/assets/js/50.353b80a6.js"><link rel="prefetch" href="/assets/js/51.3849ed66.js"><link rel="prefetch" href="/assets/js/52.289dedf5.js"><link rel="prefetch" href="/assets/js/53.b7d4b1aa.js"><link rel="prefetch" href="/assets/js/54.d85a392b.js"><link rel="prefetch" href="/assets/js/56.fa22e53b.js"><link rel="prefetch" href="/assets/js/57.f5d8fdff.js"><link rel="prefetch" href="/assets/js/58.2129e604.js"><link rel="prefetch" href="/assets/js/59.e8b7faa2.js"><link rel="prefetch" href="/assets/js/6.611e3330.js"><link rel="prefetch" href="/assets/js/60.6c5a9396.js"><link rel="prefetch" href="/assets/js/7.adf3cf98.js"><link rel="prefetch" href="/assets/js/8.15dfe6a5.js"><link rel="prefetch" href="/assets/js/9.44e8cc40.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.4a8594da.js">
    <link rel="stylesheet" href="/assets/css/0.styles.4740d439.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/logo.svg" alt="V3 docs" class="logo"> <span class="site-name can-hide">V3 docs</span></a> <div class="links"><form id="search-form" role="search" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form> <nav class="nav-links can-hide"><div class="nav-item"><a href="/setup/" class="nav-link router-link-active">
  Setup
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Features Menu" class="dropdown-title"><span class="title">Features</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/features/PUP.html" class="nav-link">
  PUP
</a></li><li class="dropdown-item"><!----> <a href="/features/bulk-content-importer.html" class="nav-link">
  Bulk Content Importer
</a></li><li class="dropdown-item"><!----> <a href="/features/external-storage.html" class="nav-link">
  External Storage
</a></li><li class="dropdown-item"><!----> <a href="/features/security.html" class="nav-link">
  Security
</a></li><li class="dropdown-item"><!----> <a href="/features/social-login.html" class="nav-link">
  Social Login
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Customization Menu" class="dropdown-title"><span class="title">Customization</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/customization/language.html" class="nav-link">
  Language
</a></li><li class="dropdown-item"><!----> <a href="/customization/routes.html" class="nav-link">
  Routes
</a></li><li class="dropdown-item"><!----> <a href="/customization/theme.html" class="nav-link">
  Theme
</a></li></ul></div></div><div class="nav-item"><a href="/API/" class="nav-link">
  API
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Extra Menu" class="dropdown-title"><span class="title">Extra</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/extra/CDN.html" class="nav-link">
  CDN
</a></li><li class="dropdown-item"><!----> <a href="/extra/CloudFlare.html" class="nav-link">
  CloudFlare
</a></li><li class="dropdown-item"><!----> <a href="/extra/ShareX.html" class="nav-link">
  ShareX
</a></li></ul></div></div><div class="nav-item"><a href="/settings/" class="nav-link">
  Settings
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Components Menu" class="dropdown-title"><span class="title">Components</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/components/listing.html" class="nav-link">
  Listing
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/setup/" class="nav-link router-link-active">
  Setup
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Features Menu" class="dropdown-title"><span class="title">Features</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/features/PUP.html" class="nav-link">
  PUP
</a></li><li class="dropdown-item"><!----> <a href="/features/bulk-content-importer.html" class="nav-link">
  Bulk Content Importer
</a></li><li class="dropdown-item"><!----> <a href="/features/external-storage.html" class="nav-link">
  External Storage
</a></li><li class="dropdown-item"><!----> <a href="/features/security.html" class="nav-link">
  Security
</a></li><li class="dropdown-item"><!----> <a href="/features/social-login.html" class="nav-link">
  Social Login
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Customization Menu" class="dropdown-title"><span class="title">Customization</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/customization/language.html" class="nav-link">
  Language
</a></li><li class="dropdown-item"><!----> <a href="/customization/routes.html" class="nav-link">
  Routes
</a></li><li class="dropdown-item"><!----> <a href="/customization/theme.html" class="nav-link">
  Theme
</a></li></ul></div></div><div class="nav-item"><a href="/API/" class="nav-link">
  API
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Extra Menu" class="dropdown-title"><span class="title">Extra</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/extra/CDN.html" class="nav-link">
  CDN
</a></li><li class="dropdown-item"><!----> <a href="/extra/CloudFlare.html" class="nav-link">
  CloudFlare
</a></li><li class="dropdown-item"><!----> <a href="/extra/ShareX.html" class="nav-link">
  ShareX
</a></li></ul></div></div><div class="nav-item"><a href="/settings/" class="nav-link">
  Settings
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Components Menu" class="dropdown-title"><span class="title">Components</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/components/listing.html" class="nav-link">
  Listing
</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Setup</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/setup/" aria-current="page" class="sidebar-link">Introduction</a></li><li><a href="/setup/debug.html" class="sidebar-link">Debug</a></li><li><a href="/setup/hosting.html" class="sidebar-link">Hosting</a></li><li><a href="/setup/install.html" class="sidebar-link">Install</a></li><li><a href="/setup/requirements.html" class="sidebar-link">Requirements</a></li><li><a href="/setup/root-install.html" class="sidebar-link">Root install (LEMP)</a></li><li><a href="/setup/root-openlitespeed.html" aria-current="page" class="active sidebar-link">Root install (OpenLiteSpeed)</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/setup/root-openlitespeed.html#prepare-the-system" class="sidebar-link">Prepare the system</a></li><li class="sidebar-sub-header"><a href="/setup/root-openlitespeed.html#set-up-hostname" class="sidebar-link">Set up hostname</a></li><li class="sidebar-sub-header"><a href="/setup/root-openlitespeed.html#install-openlitespeed" class="sidebar-link">Install OpenLiteSpeed</a></li><li class="sidebar-sub-header"><a href="/setup/root-openlitespeed.html#install-php-7-4" class="sidebar-link">Install PHP 7.4</a></li><li class="sidebar-sub-header"><a href="/setup/root-openlitespeed.html#install-mysql-database-mariadb-10-5" class="sidebar-link">Install MySQL Database (MariaDB 10.5)</a></li><li class="sidebar-sub-header"><a href="/setup/root-openlitespeed.html#setup-the-website" class="sidebar-link">Setup the website</a></li><li class="sidebar-sub-header"><a href="/setup/root-openlitespeed.html#setup-ssl" class="sidebar-link">Setup SSL</a></li></ul></li><li><a href="/setup/server-issues.html" class="sidebar-link">Server issues</a></li><li><a href="/setup/settings-file.html" class="sidebar-link">Settings file</a></li><li><a href="/setup/troubleshot.html" class="sidebar-link">Troubleshot</a></li><li><a href="/setup/update-guide.html" class="sidebar-link">Update Guide</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="root-install-openlitespeed"><a href="#root-install-openlitespeed" class="header-anchor">#</a> Root install (OpenLiteSpeed)</h1> <p>This guide is for <strong>Ubuntu 20.04 (LTS) x64</strong> and it will show you how to set up Chevereto with OpenLiteSpeed web server on Ubuntu.</p> <blockquote><p>Replace <code>example.com</code> with your own domain
Point the A record of <code>host.example.com</code> on your server ip</p></blockquote> <h2 id="prepare-the-system"><a href="#prepare-the-system" class="header-anchor">#</a> Prepare the system</h2> <p>Before begin, make sure that the base system is updated.</p> <div class="language- extra-class"><pre class="language-text"><code>sudo apt update &amp;&amp; sudo apt upgrade
</code></pre></div><h2 id="set-up-hostname"><a href="#set-up-hostname" class="header-anchor">#</a> Set up hostname</h2> <p>Changing the hostname on Ubuntu 20.04 is a rather simple process involving just few steps.
It is recommended to use a fully-qualified domain name (FQDN ) such as <code>host.example.com</code> for both static and transient names.
First, check your current hostname, to do so use either <code>hostnamectl</code> or <code>hostname</code> command:</p> <div class="language- extra-class"><pre class="language-text"><code>hostnamectl
</code></pre></div><p>Changing the system hostname is a simple process, the syntax is as follows:</p> <div class="language- extra-class"><pre class="language-text"><code>sudo hostnamectl set-hostname host.example.com
</code></pre></div><p><strong>Note:</strong> You shouldn’t use the same hostname on two different machines on the same network.</p> <p>On most systems, the hostname is mapped to <code>127.0.0.1</code> in <code>/etc/hosts</code>, open the file and change the old <code>hostname</code> to the new one.</p> <div class="language- extra-class"><pre class="language-text"><code>/etc/hosts
</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>127.0.0.1   localhost
127.0.0.1   host.example.com

# The following lines are desirable for IPv6 capable hosts
::1     localhost ip6-localhost ip6-loopback
ff02::1 ip6-allnodes
ff02::2 ip6-allrouters
</code></pre></div><p>If you are running Ubuntu on a cloud instance and the <code>cloud-init</code> package is installed, you also need to edit the <code>/etc/cloud/cloud.cfg</code> file.
This package is usually installed by default in the images provided by the cloud providers, and it is used to handle the initialization of the cloud instances.
If the file exists on your system open it:</p> <div class="language- extra-class"><pre class="language-text"><code>sudo nano /etc/cloud/cloud.cfg
</code></pre></div><p>Search for <code>preserve_hostname</code>, and change the value from <code>false</code> to <code>true</code>:</p> <div class="language- extra-class"><pre class="language-text"><code># This will cause the set+update hostname module to not operate (if true)
preserve_hostname: true
</code></pre></div><p>Save the file and close your editor, and let us verify the change:</p> <div class="language- extra-class"><pre class="language-text"><code>hostnamectl
</code></pre></div><p>Your new hostname will be printed on the terminal:</p> <div class="language- extra-class"><pre class="language-text"><code>   Static hostname: host.example.com
   Pretty hostname: Chevereto's Webserver
         Icon name: computer-vm
           Chassis: vm
        Machine ID: l04e355243f3da4602326b7c41e87a07
           Boot ID: ba315474704409fb9872ef2bd32c52c1
    Virtualization: kvm
  Operating System: Ubuntu 20.04 LTS
            Kernel: Linux 5.4.0-26-generic
      Architecture: x86-64
</code></pre></div><p><strong>Note:</strong> The rebooting of the system is an optional step and not required.</p> <div class="language- extra-class"><pre class="language-text"><code>sudo reboot
</code></pre></div><h2 id="install-openlitespeed"><a href="#install-openlitespeed" class="header-anchor">#</a> Install OpenLiteSpeed</h2> <p>Unfortunately, OpenLiteSpeed is not in the official Ubuntu 20.04 repositories, so you will need to add OpenLiteSpeed official repository to your system:</p> <div class="language- extra-class"><pre class="language-text"><code>wget -O - http://rpms.litespeedtech.com/debian/enable_lst_debian_repo.sh | sudo bash
</code></pre></div><p>Once the repository is added, now install the application by refreshing the APT cache and running the following command:</p> <div class="language- extra-class"><pre class="language-text"><code>sudo apt update
sudo apt install openlitespeed
</code></pre></div><h2 id="install-php-7-4"><a href="#install-php-7-4" class="header-anchor">#</a> Install PHP 7.4</h2> <p>Also, install the package that installs PHP 7.4 support for OpenLiteSpeed, you can install the PHP 7.4 by running this command:</p> <div class="language- extra-class"><pre class="language-text"><code>sudo apt install lsphp74 lsphp74-common lsphp74-mysql lsphp74-dev lsphp74-curl lsphp74-dbg lsphp74-imagick -y
</code></pre></div><p>Now, enable PHP 7.4 support for OpenLiteSpeed, you will need to create a symbolic link of the installed package:</p> <div class="language- extra-class"><pre class="language-text"><code>sudo ln -sf /usr/local/lsws/lsphp74/bin/lsphp /usr/local/lsws/fcgi-bin/lsphp5
</code></pre></div><h2 id="install-mysql-database-mariadb-10-5"><a href="#install-mysql-database-mariadb-10-5" class="header-anchor">#</a> Install MySQL Database (MariaDB 10.5)</h2> <p>As first we have to import MariaDB gpk key:</p> <div class="language- extra-class"><pre class="language-text"><code>sudo apt-key adv --fetch-keys 'https://mariadb.org/mariadb_release_signing_key.asc'
</code></pre></div><p>Now you have to add MariaDB APT repository:</p> <div class="language- extra-class"><pre class="language-text"><code>sudo add-apt-repository 'deb [arch=amd64] http://mariadb.mirror.globo.tech/repo/10.5/ubuntu focal main'
</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>sudo apt update
</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>sudo apt install mariadb-client mariadb-server
</code></pre></div><p>Once the installation is complete, start the MariaDB service and add it to the boot time:</p> <div class="language- extra-class"><pre class="language-text"><code>systemctl start mariadb
systemctl enable mariadb
</code></pre></div><p>As first we have to secure our MySQL installation, and we will use the 'mysql_secure_installation' command-line tool for it:</p> <div class="language- extra-class"><pre class="language-text"><code>mysql_secure_installation
</code></pre></div><p>Set up your root password, and type &quot;Y&quot; for the rest of the configuration:</p> <div class="language- extra-class"><pre class="language-text"><code>Set a root password? [Y/n] Y
Remove anonymous users? [Y/n] Y
Remove test database and access to it? [Y/n] Y
Reload privilege tables now? [Y/n] Y
</code></pre></div><p>Enter to the MySQL console:</p> <div class="language- extra-class"><pre class="language-text"><code>sudo mysql -u root
</code></pre></div><p>Once in the MySQL console, you will see a <code>mysql&gt;</code> prompt. Run the following statements:</p> <div class="language- extra-class"><pre class="language-text"><code>CREATE DATABASE chevereto;
CREATE USER 'chevereto' IDENTIFIED BY 'enter_a_password_here';
GRANT ALL ON chevereto.* TO 'chevereto' IDENTIFIED BY 'enter_a_password_here';
quit
</code></pre></div><p><strong>Note:</strong> You must take note of the database name, user and password (where it reads <code>enter_a_password_here</code>) as these details will be required later on.</p> <h2 id="setup-the-website"><a href="#setup-the-website" class="header-anchor">#</a> Setup the website</h2> <p>Now, we can start running OpenLiteSpeed, and manage the webserver in a very fast and comfortable way,
the graphical interface works through port 7080 and requires a username and password,
therefore we need to set up the user and password authentication for the OpenLiteSpeed dashboard.
Go to the <code>/usr/local/lsws/admin/misc/</code> directory and now run the bash script <code>admpass.sh</code> as below.</p> <div class="language- extra-class"><pre class="language-text"><code>cd /usr/local/lsws/admin/misc/
sh admpass.sh
</code></pre></div><p>Type your username and password, and you've completed the configuration of OpenLiteSpeed authentication.
After that, you can visit the OpenLiteSpeed web interface. Open your favorite web browser and go to <code>http://server-ip:7080</code>
On the OpenLiteSpeed dashboard, click the <code>Server Configuration</code> menu on the left and click the <code>External App</code> tab.
To add the new PHP 7.4 configuration, click the add <code>+</code> button on the right.
For the type, choose the <code>LiteSpeed SAPI App</code> and click the <code>Next</code> button.
Now type details configuration as below:</p> <div class="language- extra-class"><pre class="language-text"><code>Name: lsphp74
Address: uds://tmp/lshttpd/lsphp.sock
Notes: lsphp74 for OpenLiteSpeed
Max Connections: 35
Initial Request Timeout (secs): 60
Retry Timeout (secs): 0
Command: $SERVER_ROOT/lsphp74/bin/lsphp
</code></pre></div><p>And click the 'Save' button, and the PHP 7.4 configuration has been added.
Next, we will change the default PHP for OpenLiteSpeed to the PHP 7.4 version, in the <code>Server Configuration</code> menu, click the <code>Script Handler</code> tab.
Now click the 'Edit' button on the action section, on the <code>Handler Name</code>, choose the <code>lsphp74</code> that we just added and click the 'Save' button.</p> <p>And as a result, you've added and enabled the PHP 7.4 configuration for OpenLiteSpeed, now we have to setup OpenLiteSpeed on Port 80, by default, the OpenLiteSpeed is running on default port '8088'. To run the OpenLiteSpeed on default http port '80', we can use the administration dashboard to change the configuration, navigate to the OpenliteSpeed dashboard, click the <code>Listener</code> menu on the left.</p> <p>On the <code>Default</code> listeners, click the <code>view</code> button, then on the <code>Address Settings</code> section, click the <code>edit</code> button on the right side, now type details configuration as below:</p> <div class="language- extra-class"><pre class="language-text"><code>Listener Name: Default
IP Address: ANY
Port: 80
</code></pre></div><p>After that save it and click on the restart button in the dashboard, now we got OpenLiteSpeed runing on Port 80, open your web browser and type the server IP address on the address bar, and you should get the default index page of OpenLiteSpeed.</p> <p>It's time to setup Virtual Host, as first we have to create directorys for our Website:</p> <div class="language- extra-class"><pre class="language-text"><code>sudo mkdir /usr/local/lsws/example.com/{html,logs} -p
</code></pre></div><p>The html directory contains the public files and the logs directory contains the server logs.</p> <p>Next, navigate to the OpenLiteSpeed dashboard and access the <code>Virtual Hosts</code> section from the left and click the Add button, now enter the values as shown:</p> <div class="language- extra-class"><pre class="language-text"><code>Virtual Host Name: example.com
Virtual Host Root: $SERVER_ROOT/example.com/
Config File: $SERVER_ROOT/conf/vhosts/$VH_NAME/vhconf.conf
Follow Symbolic Link: Yes
Enable Scripts/ExtApps: Yes
Restrained: Yes
External App Set UID Mode: Server UID
</code></pre></div><p>Click the Save button and when you're done, you will get following error:</p> <div class="language- extra-class"><pre class="language-text"><code>⚠ file /usr/local/lsws/conf/vhosts/example.com/vhconf.conf does not exist. CLICK TO CREATE
</code></pre></div><p>Because the configuration file does not exist for now, click on the link to create the configuration file under the <code>CLICK TO CREATE</code>.
Click the Save button again to complete the virtual host creation, once the virtual host is created, go to <code>Virtual Hosts</code> -&gt; <code>Select Virtual Host (example.com)</code> -&gt; <code>General</code> and change the configuration as indicated.</p> <div class="language- extra-class"><pre class="language-text"><code>Document Root: $VH_ROOT/html/
Domain Name: example.com
Enable Compression: Yes
</code></pre></div><p>Click the Save button when you're done, next we need to set up index files, click the Edit button under <code>Index files</code> under the <code>General</code> section, set the following options:</p> <div class="language- extra-class"><pre class="language-text"><code>Use Server Index Files: No
Index files: index.php, index.html, index.htm
Auto Index: No
</code></pre></div><p>Click Save when you're done, next we have to choose Log files, go to the <code>Log</code> section and click Edit against <code>Virtual Host Log</code> and enter the following values:</p> <div class="language- extra-class"><pre class="language-text"><code>Use Server’s Log: Yes
File Name: $VH_ROOT/logs/error.log
Log Level: ERROR
Rolling Size (bytes): 10M
</code></pre></div><p><strong>Note:</strong> You can select the DEBUG log level if you were on a production/development server.</p> <p>Click Save, then click the plus sign in the <code>Access Log</code> section to add a new entry, enter the following values:</p> <div class="language- extra-class"><pre class="language-text"><code>Log Control: Own Log File
File Name: $VH_ROOT/logs/access.log
Piped Logger: Not Set
Log Format: Not Set
Log Headers: Not Set
Rolling Size (bytes): 10M
Keep Days: 30
Bytes log: Not Set
Compress Archive: Yes
</code></pre></div><p>Click Save when you're done, next, we need to configure <code>Access Control</code> under the <code>Security</code> section, set the following values:</p> <div class="language- extra-class"><pre class="language-text"><code>Allowed List: *
Denied List: Not set
</code></pre></div><p>Click Save when you're done, next we need to define the definition of the <code>Script Handler</code>, set the following values:</p> <div class="language- extra-class"><pre class="language-text"><code>Suffixes: php
Handler Type: LiteSpeed SAPI
Handler Name: [Server Level]: lsphp74
</code></pre></div><p>Next we need to set the <code>Rewrite Control</code> in the <code>Rewrite section</code>, set the following values:
Enable Rewrite: Yes
Autoload from .htaccess
Log level: Not Set
Now we need to edit <code>Rewrite Rules</code> in the <code>Rewrrite section</code>, place there Chevereto's .htaccess and save it.</p> <p>Next we have to set <code>Listeners</code>, for this go to the <code>Listeners section</code> and click the View on Default Listeners button, then click the Add button under <code>Virtual Host Mappings</code> to add a new mapping and set the following values:</p> <div class="language- extra-class"><pre class="language-text"><code>Virtual Host: example.com
Domains: example.com
</code></pre></div><p>Click Save when you're done, now click the Graceful restart button to apply all of the above changes and to restart the server.</p> <h2 id="setup-ssl"><a href="#setup-ssl" class="header-anchor">#</a> Setup SSL</h2> <p>Setting up SSL in OpenLiteSpeed requires setting up two certificates,  a self-signed certificate for the entire server and a Let's Encrypt location-specific server certificate, let's create the self-signed certificate first:</p> <div class="language- extra-class"><pre class="language-text"><code>openssl req -x509 -days 365 -newkey rsa:4096 -keyout key.pem -out cert.pem -nodes
</code></pre></div><p>In order to be able to use Let's Encrypt, we have to install the Certbot tool:</p> <div class="language- extra-class"><pre class="language-text"><code>sudo apt install certbot
</code></pre></div><p>Obtain the SSL certificate for Website:</p> <div class="language- extra-class"><pre class="language-text"><code>sudo certbot certonly --webroot -w /usr/local/lsws/example.com/html/ -d example.com
</code></pre></div><p><strong>Note:</strong> Follow the interactive prompt.</p> <p>Now navigate to the OpenliteSpeed dashboard and go to <code>Listeners</code> &gt;&gt; <code>Add New Listener</code> and add the following values:</p> <div class="language- extra-class"><pre class="language-text"><code>Listener Name: SSL
IP Address: ANY
Port: 443
Secure: Yes
</code></pre></div><p>Click Save when you're done, then go to the <code>Virtual Host Mappings</code> section under the <code>SSL listener</code> by clicking <code>SSL</code>, click the Add button and enter the following values:</p> <div class="language- extra-class"><pre class="language-text"><code>Virtual Host: example.com
Domains: example.com
</code></pre></div><p>Click Save when you're done, go to <code>Listeners</code> &gt;&gt; <code>SSL Listener</code> &gt;&gt; <code>SSL Tab</code> &gt;&gt; <code>SSL Private Key &amp; Certificate</code> (Edit button) and enter the following values for the self-signed certificate we created earlier:</p> <div class="language- extra-class"><pre class="language-text"><code>Private Key File: /srv/self-signed/key.pem
Certificate File: /srv/self-signed/cert.pem
Chained Certificate: Yes
</code></pre></div><p>Move the self-signed certificate to another directory from root:</p> <div class="language- extra-class"><pre class="language-text"><code>sudo mkdir /srv/self-signed
mv key.pem cert.pem /srv/self-signed
</code></pre></div><p>Next, go to <code>Virtual Hosts</code> &gt;&gt; example.com &gt;&gt; <code>SSL tab</code> &gt;&gt; <code>Private SSL key &amp; certificate</code> (Edit button) and fill in the following values with the Let's Encrypt certificate:</p> <div class="language- extra-class"><pre class="language-text"><code>Private Key File: /etc/letsencrypt/live/example.com/privkey.pem
Certificate File: /etc/letsencrypt/live/example.com/fullchain.pem
Chained Certificate: Yes
</code></pre></div><p>Click Save when you're done, restart the server by clicking the Graceful restart button, and now you should have successfully installed LetsEncrypt Certificate on your Website.</p> <p>Before we can go through the web-based setup process for Chevereto, we need to adjust some entries in our Chevereto directory, start by giving ownership of all files in the directory to the user nobody and the group nogroup, which the OpenLiteSpeed web server runs by default. The following chown command grants OpenLiteSpeed the ability to read and write files in the Chevereto directory so that it can serve the website and do updates automatically:</p> <div class="language- extra-class"><pre class="language-text"><code>chown -R nobody:nogroup /usr/local/lsws/example.com/
</code></pre></div><p>To change php.ini file and to increase the upload limit, you have to change following values in <code>/usr/local/lsws/lsphp74/etc/php/7.4/litespeed/php.ini</code>:</p> <div class="language- extra-class"><pre class="language-text"><code>upload_max_filesize = 20M
post_max_size = 20M
max_execution_time = 30
memory_limit = 512M
</code></pre></div></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/chevereto/docs/edit/master/setup/root-openlitespeed.md" target="_blank" rel="noopener noreferrer">Edit this page</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">1/26/2021, 11:49:05 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/setup/root-install.html" class="prev">
        Root install (LEMP)
      </a></span> <span class="next"><a href="/setup/server-issues.html">
        Server issues
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.45a3a24b.js" defer></script><script src="/assets/js/3.4515a572.js" defer></script><script src="/assets/js/55.78de9666.js" defer></script><script src="/assets/js/4.f46e38da.js" defer></script>
  </body>
</html>
